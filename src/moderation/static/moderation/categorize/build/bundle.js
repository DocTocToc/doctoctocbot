var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,i;function a(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function s(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function p(){return m(" ")}function g(){return m("")}function $(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function _(t){i=t}function w(){if(!i)throw new Error("Function called outside component initialization");return i}const k=[],x=[],j=[],N=[],C=Promise.resolve();let E=!1;function S(t){j.push(t)}function I(t){N.push(t)}const P=new Set;let T=0;function U(){const t=i;do{for(;T<k.length;){const t=k[T];T++,_(t),M(t.$$)}for(_(null),k.length=0,T=0;x.length;)x.pop()();for(let t=0;t<j.length;t+=1){const e=j[t];P.has(e)||(P.add(e),e())}j.length=0}while(k.length);for(;N.length;)N.pop()();E=!1,P.clear(),_(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const A=new Set;let q;function D(){q={r:0,c:[],p:q}}function H(){q.r||o(q.c),q=q.p}function L(t,e){t&&t.i&&(A.delete(t),t.i(e))}function O(t,e,n,o){if(t&&t.o){if(A.has(t))return;A.add(t),q.c.push((()=>{A.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function z(t,e){O(t,1,1,(()=>{e.delete(t.key)}))}function F(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function B(t){t&&t.c()}function R(t,n,c,l){const{fragment:i,on_mount:a,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,c),l||S((()=>{const n=a.map(e).filter(r);s?s.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(S)}function W(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,C.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,r,c,l,a,s,u,d=[-1]){const h=i;_(e);const m=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(h?h.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:r.target||h.$$.root};u&&u(m.root);let p=!1;if(m.ctx=c?c(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&a(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),p&&G(e,t)),n})):[],m.update(),p=!0,o(m.before_update),m.fragment=!!l&&l(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(f)}else m.fragment&&m.fragment.c();r.intro&&L(e.$$.fragment),R(e,r.target,r.anchor,r.customElement),U()}_(h)}class K{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(e){let n,o,r,c,l,i,a;return{c(){n=h("button"),o=m("Create @"),r=m(e[0]),c=m(" SocialUser"),n.disabled=l=!e[0]},m(t,l){u(t,n,l),s(n,o),s(n,r),s(n,c),i||(a=$(n,"click",e[1]),i=!0)},p(t,[e]){1&e&&y(r,t[0]),1&e&&l!==(l=!t[0])&&(n.disabled=l)},i:t,o:t,d(t){t&&f(n),i=!1,a()}}}let V="/moderation/api/create-twitter-socialuser/";function X(t,e,n){let{screenName:o}=e;return t.$$set=t=>{"screenName"in t&&n(0,o=t.screenName)},[o,async function(){let t="localhost"==window.location.hostname?"https://local.doctoctoc.net"+V+o+"/":V+o+"/";await fetch(t).then((t=>console.log(t)))}]}class Y extends K{constructor(t){super(),J(this,t,X,Q,c,{screenName:0})}}function Z(t,e,n){const o=t.slice();return o[3]=e[n],o}function tt(t,e,n){const o=t.slice();return o[8]=e[n],o}function et(e){return{c:t,m:t,p:t,d:t}}function nt(t){let e,n,o=0==t[1].length&&function(t){let e,n,o,r;return{c(){e=h("li"),n=h("a"),o=m("ðŸ”— HealthCareProvider admin"),b(n,"href",r=at()+"/admin/hcp/healthcareprovider/add/?human="+t[0]),b(n,"target","_blank")},m(t,r){u(t,e,r),s(e,n),s(n,o)},p(t,e){1&e&&r!==(r=at()+"/admin/hcp/healthcareprovider/add/?human="+t[0])&&b(n,"href",r)},d(t){t&&f(e)}}}(t),r=t[1],c=[];for(let e=0;e<r.length;e+=1)c[e]=rt(Z(t,r,e));return{c(){e=h("ul"),o&&o.c(),n=p();for(let t=0;t<c.length;t+=1)c[t].c()},m(t,r){u(t,e,r),o&&o.m(e,null),s(e,n);for(let t=0;t<c.length;t+=1)c[t].m(e,null)},p(t,n){if(0==t[1].length&&o.p(t,n),4&n){let o;for(r=t[1],o=0;o<r.length;o+=1){const l=Z(t,r,o);c[o]?c[o].p(l,n):(c[o]=rt(l),c[o].c(),c[o].m(e,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=r.length}},d(t){t&&f(e),o&&o.d(),d(c,t)}}}function ot(e){let n,o,r,c,l,i,a,d=e[8].grouping+"",g=e[8].classification+"",$=e[8].specialization+"";return{c(){n=h("li"),o=m(d),r=m(" | "),c=m(g),l=p(),i=m($),a=p()},m(t,e){u(t,n,e),s(n,o),s(n,r),s(n,c),s(n,l),s(n,i),s(n,a)},p:t,d(t){t&&f(n)}}}function rt(t){let e,n,o,r,c,l,i=t[3].taxonomy,a=[];for(let e=0;e<i.length;e+=1)a[e]=ot(tt(t,i,e));return{c(){e=h("li"),n=h("a"),o=m("ðŸ”— HealthCareProvider admin"),c=p();for(let t=0;t<a.length;t+=1)a[t].c();l=g(),b(n,"href",r=at()+"/admin/hcp/healthcareprovider/"+t[3].id+"/change/"),b(n,"target","_blank")},m(t,r){u(t,e,r),s(e,n),s(n,o),u(t,c,r);for(let e=0;e<a.length;e+=1)a[e].m(t,r);u(t,l,r)},p(t,e){if(4&e){let n;for(i=t[3].taxonomy,n=0;n<i.length;n+=1){const o=tt(t,i,n);a[n]?a[n].p(o,e):(a[n]=ot(o),a[n].c(),a[n].m(l.parentNode,l))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(t){t&&f(e),t&&f(c),d(a,t),t&&f(l)}}}function ct(e){return{c:t,m:t,p:t,d:t}}function lt(e){let n,o={ctx:e,current:null,token:null,hasCatch:!1,pending:ct,then:nt,catch:et,value:1};return function(t,e){const n=e.token={};function o(t,o,r,c){if(e.token!==n)return;e.resolved=c;let l=e.ctx;void 0!==r&&(l=l.slice(),l[r]=c);const i=t&&(e.current=t)(l);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(D(),O(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),H())})):e.block.d(1),i.c(),L(i,1),i.m(e.mount(),e.anchor),a=!0),e.block=i,e.blocks&&(e.blocks[o]=i),a&&U()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=w();if(t.then((t=>{_(n),o(e.then,1,e.value,t),_(null)}),(t=>{if(_(n),o(e.catch,2,e.error,t),_(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}(e[2](),o),{c(){n=g(),o.block.c()},m(t,e){u(t,n,e),o.block.m(t,o.anchor=e),o.mount=()=>n.parentNode,o.anchor=n},p(t,[n]){!function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(o,e=t,n)},i:t,o:t,d(t){t&&f(n),o.block.d(t),o.token=null,o=null}}}let it="/hcp/api/hcp/";function at(){return"localhost"==window.location.hostname?"https://local.doctoctoc.net":""}function st(t,e,n){let o,{humanId:r}=e;var c;async function l(){let t=function(){let t="?human__id="+r;return"localhost"==window.location.hostname?"https://local.doctoctoc.net"+it+t:it+t}();console.log(t);let e=await await fetch(t),n=await e.json();return console.log(n),n}return c=async()=>{n(1,o=await l()),console.log(r)},w().$$.on_mount.push(c),t.$$set=t=>{"humanId"in t&&n(0,r=t.humanId)},[r,o,l,undefined]}class ut extends K{constructor(t){super(),J(this,t,st,lt,c,{humanId:0})}}function ft(t,e,n){const o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function dt(t,e,n){const o=t.slice();return o[11]=e[n],o}function ht(t){let e,n,o=[],r=new Map,c=t[2];const l=t=>t[8].id;for(let e=0;e<c.length;e+=1){let n=ft(t,c,e),i=l(n);r.set(i,o[e]=$t(i,n))}return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=g()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);u(t,e,r),n=!0},p(t,n){4&n&&(c=t[2],D(),o=function(t,e,n,o,r,c,l,i,a,s,u,f){let d=t.length,h=c.length,m=d;const p={};for(;m--;)p[t[m].key]=m;const g=[],$=new Map,b=new Map;for(m=h;m--;){const t=f(r,c,m),i=n(t);let a=l.get(i);a?o&&a.p(t,e):(a=s(i,t),a.c()),$.set(i,g[m]=a),i in p&&b.set(i,Math.abs(m-p[i]))}const y=new Set,v=new Set;function _(t){L(t,1),t.m(i,u),l.set(t.key,t),u=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],o=e.key,r=n.key;e===n?(u=e.first,d--,h--):$.has(r)?!l.has(o)||y.has(o)?_(e):v.has(r)?d--:b.get(o)>b.get(r)?(v.add(o),_(e)):(y.add(r),d--):(a(n,l),d--)}for(;d--;){const e=t[d];$.has(e.key)||a(e,l)}for(;h;)_(g[h-1]);return g}(o,n,l,1,t,c,r,e.parentNode,z,$t,e,ft),H())},i(t){if(!n){for(let t=0;t<c.length;t+=1)L(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)O(o[t]);n=!1},d(t){for(let e=0;e<o.length;e+=1)o[e].d(t);t&&f(e)}}}function mt(t){let e,n,o,r,c;function l(e){t[5](e)}let i={};return void 0!==t[1]&&(i.screenName=t[1]),o=new Y({props:i}),x.push((()=>F(o,"screenName",l))),{c(){e=h("p"),e.textContent="Utilisateur inconnu dans notre base de donnÃ©es.",n=p(),B(o.$$.fragment)},m(t,r){u(t,e,r),u(t,n,r),R(o,t,r),c=!0},p(t,e){const n={};!r&&2&e&&(r=!0,n.screenName=t[1],I((()=>r=!1))),o.$set(n)},i(t){c||(L(o.$$.fragment,t),c=!0)},o(t){O(o.$$.fragment,t),c=!1},d(t){t&&f(e),t&&f(n),W(o,t)}}}function pt(t){let e;return{c(){e=h("mark"),e.textContent="*"},m(t,n){u(t,e,n)},d(t){t&&f(e)}}}function gt(t){let e,n,o,r,c,l,i,a,d,g,$=t[11].category.label+"",b=t[11].moderator.profile.json.screen_name+"",v=vt(t[11].created)+"",_=vt(t[11].updated)+"",w=t[11].moderator.id==t[8].id&&pt();return{c(){var t,s,u,f;e=h("li"),n=h("div"),o=m($),w&&w.c(),r=m(" | "),c=m(b),l=m(" | Created "),i=m(v),a=m(" | Updated "),d=m(_),g=p(),t=n,s="white-space",null===(u="nowrap")?t.style.removeProperty(s):t.style.setProperty(s,u,f?"important":"")},m(t,f){u(t,e,f),s(e,n),s(n,o),w&&w.m(n,null),s(n,r),s(n,c),s(n,l),s(n,i),s(n,a),s(n,d),s(n,g)},p(t,e){4&e&&$!==($=t[11].category.label+"")&&y(o,$),t[11].moderator.id==t[8].id?w||(w=pt(),w.c(),w.m(n,r)):w&&(w.d(1),w=null),4&e&&b!==(b=t[11].moderator.profile.json.screen_name+"")&&y(c,b),4&e&&v!==(v=vt(t[11].created)+"")&&y(i,v),4&e&&_!==(_=vt(t[11].updated)+"")&&y(d,_)},d(t){t&&f(e),w&&w.d()}}}function $t(t,e){let n,o,r,c,l,i,g,$,v,_,w,k,j,N,C,E,S,P,T,U,M,A,q,D,H,z,G,J,K,Q,V,X,Y,Z,tt,et,nt,ot,rt,ct,lt,it,at=e[8].id+"",st=e[8].user_id+"",ft=e[8].profile.json.screen_name+"",ht=e[8].profile.json.name+"",mt=e[8].categoryrelationships,pt=[];for(let t=0;t<mt.length;t+=1)pt[t]=gt(dt(e,mt,t));function $t(t){e[6](t,e[8])}let bt={};return void 0!==e[8].human[0].id&&(bt.humanId=e[8].human[0].id),rt=new ut({props:bt}),x.push((()=>F(rt,"humanId",$t))),{key:t,first:null,c(){n=h("div"),o=h("ul"),r=h("li"),c=h("img"),i=p(),g=h("li"),$=m("SocialUser id: "),v=m(at),_=p(),w=h("li"),k=h("a"),j=m("ðŸ”— Twitter profile"),C=p(),E=h("li"),S=m("Twitter user id: "),P=m(st),T=p(),U=h("li"),M=m("Twitter screen name: "),A=m(ft),q=p(),D=h("li"),H=m("Twitter name: "),z=m(ht),G=p(),J=h("li"),K=m("category\n\t\t\t\t\t\t"),Q=h("ul");for(let t=0;t<pt.length;t+=1)pt[t].c();V=p(),X=h("li"),Y=h("a"),Z=m("ðŸ”— SocialUser admin"),et=p(),nt=h("li"),ot=m("Health Care Provider "),B(rt.$$.fragment),lt=p(),a(c.src,l=e[8].profile.biggeravatar)||b(c,"src",l),b(c,"alt","user avatar"),b(k,"href",N="https://twitter.com/intent/user?user_id="+e[8].profile.json.id_str),b(k,"target","_blank"),b(Q,"class","svelte-sm5shj"),b(Y,"href",tt="/admin/moderation/socialuser/"+e[8].id+"/change/"),b(Y,"target","_blank"),b(o,"class","svelte-sm5shj"),b(n,"class","parent"),this.first=n},m(t,e){u(t,n,e),s(n,o),s(o,r),s(r,c),s(o,i),s(o,g),s(g,$),s(g,v),s(o,_),s(o,w),s(w,k),s(k,j),s(o,C),s(o,E),s(E,S),s(E,P),s(o,T),s(o,U),s(U,M),s(U,A),s(o,q),s(o,D),s(D,H),s(D,z),s(o,G),s(o,J),s(J,K),s(J,Q);for(let t=0;t<pt.length;t+=1)pt[t].m(Q,null);s(o,V),s(o,X),s(X,Y),s(Y,Z),s(o,et),s(o,nt),s(nt,ot),R(rt,nt,null),s(n,lt),it=!0},p(t,n){if(e=t,(!it||4&n&&!a(c.src,l=e[8].profile.biggeravatar))&&b(c,"src",l),(!it||4&n)&&at!==(at=e[8].id+"")&&y(v,at),(!it||4&n&&N!==(N="https://twitter.com/intent/user?user_id="+e[8].profile.json.id_str))&&b(k,"href",N),(!it||4&n)&&st!==(st=e[8].user_id+"")&&y(P,st),(!it||4&n)&&ft!==(ft=e[8].profile.json.screen_name+"")&&y(A,ft),(!it||4&n)&&ht!==(ht=e[8].profile.json.name+"")&&y(z,ht),4&n){let t;for(mt=e[8].categoryrelationships,t=0;t<mt.length;t+=1){const o=dt(e,mt,t);pt[t]?pt[t].p(o,n):(pt[t]=gt(o),pt[t].c(),pt[t].m(Q,null))}for(;t<pt.length;t+=1)pt[t].d(1);pt.length=mt.length}(!it||4&n&&tt!==(tt="/admin/moderation/socialuser/"+e[8].id+"/change/"))&&b(Y,"href",tt);const o={};!ct&&4&n&&(ct=!0,o.humanId=e[8].human[0].id,I((()=>ct=!1))),rt.$set(o)},i(t){it||(L(rt.$$.fragment,t),it=!0)},o(t){O(rt.$$.fragment,t),it=!1},d(t){t&&f(n),d(pt,t),W(rt)}}}function bt(t){let e,n,o,r;const c=[mt,ht],l=[];function i(t,e){return t[2]&&0==t[2].length&&t[1]?0:t[2]?1:-1}return~(e=i(t))&&(n=l[e]=c[e](t)),{c(){n&&n.c(),o=g()},m(t,n){~e&&l[e].m(t,n),u(t,o,n),r=!0},p(t,r){let a=e;e=i(t),e===a?~e&&l[e].p(t,r):(n&&(D(),O(l[a],1,1,(()=>{l[a]=null})),H()),~e?(n=l[e],n?n.p(t,r):(n=l[e]=c[e](t),n.c()),L(n,1),n.m(o.parentNode,o)):n=null)},i(t){r||(L(n),r=!0)},o(t){O(n),r=!1},d(t){~e&&l[e].d(t),t&&f(o)}}}function yt(e){let n,l,i,a,d,y,_,w,k,x,j,N,C,E=e[2],S=bt(e);return{c(){n=h("form"),l=h("label"),l.textContent="Enter Twitter screen_name",i=p(),a=h("input"),d=p(),y=h("button"),_=m("Fetch!"),k=p(),S.c(),x=g(),b(l,"for","screen_name"),b(a,"type","text"),b(a,"name","screen_name"),b(a,"id","screen_name"),b(y,"type","submit"),y.disabled=w=!e[0],b(n,"action",""),b(n,"method","get")},m(t,o){var c;u(t,n,o),s(n,l),s(n,i),s(n,a),v(a,e[0]),s(n,d),s(n,y),s(y,_),u(t,k,o),S.m(t,o),u(t,x,o),j=!0,N||(C=[$(a,"input",e[4]),$(y,"click",(function(){r(e[3](e[0]))&&e[3](e[0]).apply(this,arguments)})),$(n,"submit",(c=function(){r(e[3](e[0]))&&e[3](e[0]).apply(this,arguments)},function(t){return t.preventDefault(),c.call(this,t)}))],N=!0)},p(n,[o]){e=n,1&o&&a.value!==e[0]&&v(a,e[0]),(!j||1&o&&w!==(w=!e[0]))&&(y.disabled=w),4&o&&c(E,E=e[2])?(D(),O(S,1,1,t),H(),S=bt(e),S.c(),L(S),S.m(x.parentNode,x)):S.p(e,o)},i(t){j||(L(S),j=!0)},o(t){O(S),j=!1},d(t){t&&f(n),t&&f(k),t&&f(x),S.d(t),N=!1,o(C)}}}function vt(t){return new Date(t).toDateString()}function _t(t,e,n){let o="",r="",c=null;async function l(t){let e="/moderation/api/socialuser/?search="+t;return console.log(e),await fetch(e).then((t=>t.json())).then((t=>{console.log("data:"+t),n(2,c=t)})),console.log(c),c}{let t=new URL(document.location).searchParams.get("screen_name");t&&(console.log(t),n(2,c=l(t)),n(1,r=t),n(0,o=t))}return[o,r,c,async function(t){t.startsWith("@")?n(1,r=t.slice(1)):n(1,r=t),n(2,c=await l(r))},function(){o=this.value,n(0,o)},function(t){r=t,n(1,r)},function(e,o){t.$$.not_equal(o.human[0].id,e)&&(o.human[0].id=e,n(2,c))}]}class wt extends K{constructor(t){super(),J(this,t,_t,yt,c,{})}}function kt(e){let n,o,r,c,l;return c=new wt({}),{c(){n=h("main"),o=h("h2"),o.textContent="SocialUser",r=p(),B(c.$$.fragment),b(n,"class","svelte-d02qci")},m(t,e){u(t,n,e),s(n,o),s(n,r),R(c,n,null),l=!0},p:t,i(t){l||(L(c.$$.fragment,t),l=!0)},o(t){O(c.$$.fragment,t),l=!1},d(t){t&&f(n),W(c)}}}return class extends K{constructor(t){super(),J(this,t,null,kt,c,{})}}}();
//# sourceMappingURL=bundle.js.map
